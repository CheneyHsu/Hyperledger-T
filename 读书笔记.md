# Fabric 1.0 实践

### Setup GoLang

    1. wget https://dl.gocn.io/golang/1.8.1/go1.8.1.linux-amd64.tar.gz
    2. tar -xzvf go1.8.1.linux-amd64.tar.gz
    3. mv ./go  /usr/local
    4. vim /etc/profile
        export GOROOT=/usr/local/go
        export PATH=$PATH:$GOROOT/bin
    5. source /etc/profile

### Setup Fabric 1.0 environment preparation

    1. vim ~/.bashrc
         export GOPATH=/home/hsukk/fabric
    2. source ~/.bashrc

### Update system and Install required package

    sudo apt-get update && apt-get install -y libsnappy-dev zlib1g-dev libbz2-dev libltdl-dev libtool

### Install  Docker

    1. curl -sSL https://get.daocloud.io/docker | sh
    2. sudo usermod -aG docker hsukk;newgrp - docker
    3. sudo vi /etc/default/docker
            DOCKER_OPTS="$DOCKER_OPTS -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --api-cors-header='*'"
    4. curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://5c609c19.m.daocloud.io
    5. sudo service docker restart
    6. sudo systemctl enable docker.service

### git clone fabric

    1. mkdir -p /home/hsukk/fabric/src/github.com/hyperledger
    2. cd $GOPATH/src/github.com/hyperledger
    3. git clone https://github.com/hyperledger/fabric.git
    4. git clone https://github.com/hyperledger/fabric-ca.git

### fabric-peer

    1. cd $GOPATH/src/github.com/hyperledger/fabric
    2. make peer

### fabcir-orderer

    1. cd $GOPATH/src/github.com/hyperledger/fabric
    2. ARCH=x86_64
    3. BASEIMAGE_RELEASE=0.3.1
    4. PROJECT_VERSION=1.0.0
    5. LD_FLAGS="-X github.com/hyperledger/fabric/common/metadata.Version=${PROJECT_VERSION} \
        -X github.com/hyperledger/fabric/common/metadata.BaseVersion=${BASEIMAGE_RELEASE} \
        -X github.com/hyperledger/fabric/common/metadata.BaseDockerLabel=org.hyperledger.fabric \
        -X github.com/hyperledger/fabric/common/metadata.DockerNamespace=hyperledger \
        -X github.com/hyperledger/fabric/common/metadata.BaseDockerNamespace=hyperledger" 
    6. CGO_CFLAGS=" " go install -ldflags "$LD_FLAGS -linkmode external -extldflags' -static -lpthread'" \
        github.com/hyperledger/fabric/orderer
    `可以使用 make ofderer 来完成`

### fabric-ca

    1. 编译并安装fabric-ca相关组件到$GOPATH/bin下：
        go install -ldflags " -linkmode external -extldflags '-static -lpthread'" github.com/hyperledger/fabric-ca/cmd/..


